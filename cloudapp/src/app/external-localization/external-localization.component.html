<app-topmenu></app-topmenu>
<!-- For testing
<span *ngIf="!pageLoading">Page Loaded!</span><br>
<span *ngIf="settingsLoaded else noExternalLinks"> {{settings.items.length}} settings loaded.</span><br><br>
-->
<h3 *ngIf="pageLoading">Loading ...</h3>


<div *ngIf="!settingsFound()">
    <span>You have not created any 'External link templates' in the settings section of this cloud app.</span><br>
    <b><a href="/#/settings">Add external localization links</a></b>
</div>

<ng-template #noEntities>
    <div *ngIf="!pageLoading">Please navigate to a list.</div>
</ng-template>

    <div *ngIf="pageLoaded$ | async as externalLinkAttributes else noEntities" [ngClass]="'table'">
        <div *ngIf="settingsFound()">
        <!--All data is ready-->
        <p><b>Use the links following the titles below to search for the material externally.</b></p>
        <div [hidden]="false"  *ngFor="let externalLinkAttribute of externalLinkAttributes">
            <div  [ngClass]="'table-row'">
                <span [ngClass]="'table-cell'">{{externalLinkAttribute.id }}</span>
                <span [ngClass]="'table-cell'">{{externalLinkAttribute.title | truncate : 50}}</span>
            </div>
            <div [ngClass]="'table-row'">
                <div [ngClass]="'table-cell'"></div>
                <div [ngClass]="'table-cell'">
            <span *ngFor="let item of settings.items">
              <a *ngIf="item.searchCriteriaType=='1'" target="externalLocalization" href="{{item.startOfLink}}+{{externalLinkAttributes.isbn}}+{{item.endOfLink}}">{{item.linkName}}</a>
              <a *ngIf="item.searchCriteriaType=='2'" target="externalLocalization" href="{{item.startOfLink}}+{{externalLinkAttributes.title}}+{{item.endOfLink}}">{{item.linkName}}</a>
              <a *ngIf="item.searchCriteriaType=='4'" target="externalLocalization" href="{{item.startOfLink}}+{{externalLinkAttributes.author}}+{{item.endOfLink}}">{{item.linkName}}</a>
            </span>
                </div>
            </div>
        </div>
    </div>
</div>


